# ==============================================================================
# .env - 共通設定（本番デフォルト / CI環境）
# ==============================================================================
# このファイルを .env にコピーして使用してください。
# ローカル開発で上書きしたい値は .env.local に記述してください。
#
# 読み込み順: .env → .env.local (override)
# ==============================================================================

# アプリケーション実行環境
ENVIRONMENT=local

# ログレベル (DEBUG, INFO, WARNING, ERROR, CRITICAL)
# 本番: INFO（CW Logs のノイズ削減）
# ローカル: .env.local で DEBUG に上書き推奨
LOG_LEVEL=INFO

# ドライランモード
# true: メール送信と履歴保存をスキップ（LLM判定とキャッシュは実行）
# false: 通常実行
DRY_RUN=false

# DynamoDB テーブル名
DYNAMODB_CACHE_TABLE=ai-curated-newsletter-cache
DYNAMODB_HISTORY_TABLE=ai-curated-newsletter-history

# Bedrock LLM設定
# Claude Haiku 4.5 (コスト削減: input $1.00/1M, output $5.00/1M)
BEDROCK_MODEL_ID=anthropic.claude-haiku-4-5-20251001-v1:0
BEDROCK_REGION=ap-northeast-1
BEDROCK_MAX_PARALLEL=4
# インファレンスプロファイルARN (アカウント固有。.env.local で設定推奨)
BEDROCK_INFERENCE_PROFILE_ARN=
# リトライ設定（ThrottlingException対策）
BEDROCK_REQUEST_INTERVAL=2.5
BEDROCK_RETRY_BASE_DELAY=2.0
BEDROCK_MAX_BACKOFF=20.0
BEDROCK_MAX_RETRIES=4

# 記事選抜設定
LLM_CANDIDATE_MAX=120
FINAL_SELECT_MAX=15
# 同一ドメイン最大件数（0=制限なし、正の整数で制限を有効化）
FINAL_SELECT_MAX_PER_DOMAIN=999

# RSS/Atom ソース設定ファイルパス
SOURCES_CONFIG_PATH=config/sources.yaml

# メール設定（実際のアドレスは .env.local で設定）
FROM_EMAIL=noreply@example.com
TO_EMAIL=recipient@example.com

# AWS 設定
AWS_REGION=ap-northeast-1
SES_REGION=ap-northeast-1

# ==============================================================================
# .env.local - ローカル開発固有の設定（.env の値を上書き）
# ==============================================================================
# 以下の内容を .env.local にコピーして、実際の値に変更してください。
# .env.local は git 管理しません。
#
# LOG_LEVEL=DEBUG
# BEDROCK_INFERENCE_PROFILE_ARN=arn:aws:bedrock:ap-northeast-1:ACCOUNT_ID:inference-profile/...
# FROM_EMAIL=your-sender@example.com
# TO_EMAIL=your-recipient@example.com
